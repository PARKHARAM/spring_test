<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mary.blog.repository.ReleaseRepository">
	<insert id="save">
		INSERT INTO release_t (uname,postcode, address, product,price_count ,tel, total_price ,product_n, date, userId)
		VALUES(#{uname},#{postcode},#{address}, #{product}, #{price_count} ,#{tel}, #{total_price}, #{product_n}, now(),#{userId} )
	</insert>
	<insert id="save_b">
		INSERT INTO release_b (uname,postcode, address, product,price_count ,tel, total_price ,product_n, date, userId)
		VALUES(#{uname},#{postcode},#{address}, #{product}, #{price_count} ,#{tel}, #{total_price}, #{product_n}, now(), #{userId})
	</insert>
	<insert id="save_basket">
		INSERT INTO basket (uname,  product,price_count ,price, total_price, product_n,userId)
		VALUES(#{uname}, #{product}, #{price_count}, #{price} , #{total_price}, #{product_n}, #{userId})
	</insert>	
	
	<select id="nameupdate" resultType="com.mary.blog.model.Release">
		UPDATE release_t SET uname =(SELECT uname FROM test_s WHERE pri=release_t.id)
	</select>
	
	<select id="findById" resultType="com.mary.blog.controller.dto.ReleaseDto">
		SELECT * FROM release_t WHERE id LIKE #{id};

	</select>
	<select id="find2" resultType="com.mary.blog.controller.dto.ReleaseDto">
			SELECT product, price, id FROM item WHERE product LIKE #{product};
	</select>

	<select id="findname" resultType="com.mary.blog.controller.dto.ReleaseDto">
			SELECT * FROM user WHERE username LIKE #{username};
	</select>
		<select id="finduser" resultType="com.mary.blog.controller.dto.ReleaseDto">
			SELECT * FROM release_t WHERE uname LIKE #{uname} AND product_n LIKE #{product} ;
	</select>
	
	<select id="findAll" resultType="com.mary.blog.model.Release">

		SELECT * FROM release_t WHERE userId LIKE 12;
	</select>
	
		<select id="findAllbasket" resultType="com.mary.blog.model.Basket">

		SELECT * FROM basket WHERE userId LIKE 12;
	</select>
	
		<select id="findBylist" resultType="com.mary.blog.model.Release">
		SELECT * FROM release_t WHERE userId LIKE #{userId};

	</select>
	
	<select id="find_detail" resultType="com.mary.blog.controller.dto.ReleaseDto">
			SELECT * FROM release_t WHERE id LIKE #{id};
	</select>
	
	<select id="find3" resultType="com.mary.blog.controller.dto.BasketDto">
			SELECT product, price, id FROM item WHERE product LIKE #{product};
	</select>
	
	<select id="findBybasket" resultType="com.mary.blog.model.Basket">
		SELECT * FROM basket WHERE userId LIKE #{userId};

	</select>
	<update id="update">
		update basket set price_count=#{price_count}, total_price=#{total_price} 
		where id=#{id}
	</update>
	<select id="findByupdate" resultType="com.mary.blog.model.Basket">
		SELECT * FROM basket WHERE id LIKE #{id} ;
	</select>
	
	
</mapper>


